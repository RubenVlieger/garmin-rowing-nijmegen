<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nijmegen Watersport Interface | NWI</title>
    <meta name="description" content="Real-time rowing conditions for Nijmegen ‚Äî wind, water levels, and weather on your Garmin watch.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">

    <!-- App CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ====== HERO ====== -->
    <section class="hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <p class="hero-badge">üö£ Open Source Garmin Watchface</p>
            <h1>Nijmegen<br>Watersport<br>Interface</h1>
            <p class="hero-subtitle">Real-time wind, water &amp; weather ‚Äî right on your wrist.</p>

            <div class="hero-stats">
                <div class="stat-card glass">
                    <span class="stat-number" id="totalUsers">‚Äî</span>
                    <span class="stat-label">Total User Sessions</span>
                </div>
                <div class="stat-card glass">
                    <span class="stat-number" id="totalCountries">‚Äî</span>
                    <span class="stat-label">Countries</span>
                </div>
            </div>

            <a href="https://apps.garmin.com/apps/813372f8-1f70-4b68-9f9c-ade7b10ccfa1"
               target="_blank" rel="noopener"
               class="cta-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                Get it on Garmin Connect IQ
            </a>
        </div>
        <div class="scroll-indicator">
            <span>Scroll</span>
            <div class="scroll-line"></div>
        </div>
    </section>

    <!-- ====== DAILY USERS CHART ====== -->
    <section class="section" id="analytics">
        <div class="container">
            <div class="section-header">
                <h2>Daily Active Users</h2>
                <p class="section-desc">Unique user sessions per day since tracking began.</p>
            </div>
            <div class="chart-card glass">
                <canvas id="dailyChart"></canvas>
            </div>
        </div>
    </section>

    <!-- ====== WORLD MAP ====== -->
    <section class="section" id="map-section">
        <div class="container">
            <div class="section-header">
                <h2>Users Around the World</h2>
                <p class="section-desc">Interactive map ‚Äî darker red means more users.</p>
            </div>
            <div class="map-card glass">
                <div id="worldMap"></div>
            </div>
        </div>
    </section>

    <!-- ====== COUNTRY LIST ====== -->
    <section class="section" id="countries">
        <div class="container">
            <div class="section-header">
                <h2>User Distribution</h2>
                <p class="section-desc">Users by country, aggregated across all days.</p>
            </div>
            <div class="country-grid" id="countryGrid">
                <div class="country-loading">Loading data...</div>
            </div>
        </div>
    </section>

    <!-- ====== GARMIN EMBED ====== -->
    <section class="section" id="garmin-app">
        <div class="container">
            <div class="section-header">
                <h2>Get It On Your Wrist</h2>
                <p class="section-desc">Free on the Garmin Connect IQ Store.</p>
            </div>
            <div class="app-embed-card glass">
                <div class="app-embed-inner">
                    <iframe
                        id="garminIframe"
                        src="https://apps.garmin.com/apps/813372f8-1f70-4b68-9f9c-ade7b10ccfa1"
                        title="Garmin Connect IQ Store"
                        loading="lazy"
                        sandbox="allow-scripts allow-same-origin allow-popups"
                    ></iframe>
                    <!-- Fallback shown if iframe fails -->
                    <div class="app-fallback" id="appFallback">
                        <div class="app-fallback-icon">‚åö</div>
                        <h3>Nijmegen Watersport Interface</h3>
                        <p>Wind, water levels, precipitation &amp; more ‚Äî optimized for rowers in Nijmegen.</p>
                        <a href="https://apps.garmin.com/apps/813372f8-1f70-4b68-9f9c-ade7b10ccfa1"
                           target="_blank" rel="noopener" class="cta-btn cta-btn-sm">
                            View on Garmin Connect IQ ‚Üí
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ====== SUGGESTIONS FORM ====== -->
    <section class="section" id="suggestions">
        <div class="container">
            <div class="section-header">
                <h2>Feature Suggestions</h2>
                <p class="section-desc">Got an idea? I'd love to hear it.</p>
            </div>
            <div class="form-card glass">
                <form id="suggestionForm" autocomplete="off">
                    <div class="form-group">
                        <label for="sugName">Name <span class="optional">(optional)</span></label>
                        <input type="text" id="sugName" name="name" placeholder="Your name">
                    </div>
                    <div class="form-group">
                        <label for="sugText">Your Idea</label>
                        <textarea id="sugText" name="suggestion" placeholder="I think it would be cool if..." required rows="4"></textarea>
                    </div>
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span class="btn-text">Submit Suggestion</span>
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </form>

                <!-- Thank-you overlay -->
                <div class="thank-you-overlay" id="thankYou">
                    <div class="thumbs-up">üëç</div>
                    <p class="thank-you-text">Thank you!</p>
                    <p class="thank-you-sub">Your suggestion has been saved.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ====== FOOTER ====== -->
    <footer class="footer">
        <div class="container">
            <p>
                Built with ‚ù§Ô∏è for Nijmegen rowers ¬∑
                <a href="https://github.com/RubenVlieger/garmin-rowing-nijmegen" target="_blank" rel="noopener">GitHub</a> ¬∑
                <a href="privacy.html" target="_blank">Privacy</a> ¬∑
                <a href="mailto:ruben.vlieger@ru.nl">Contact</a>
            </p>
        </div>
    </footer>

    <!-- ====== SCRIPTS ====== -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>
    <script src="script.js"></script>
</body>
</html>
